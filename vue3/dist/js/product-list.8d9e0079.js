(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["product-list"],{"360d":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o}));var c=n("8116");function r(e){return c["a"].get("/goods/detail/".concat(e))}function a(){return c["a"].get("/categories")}function o(e){return c["a"].get("/search",{params:e})}},"4ddc":function(e,t,n){"use strict";n.r(t);var c=n("7a23"),r=Object(c["R"])("data-v-ce8d8e4c");Object(c["B"])("data-v-ce8d8e4c");var a={class:"product-list-wrap"},o={class:"product-list-content"},i={class:"category-header wrap"},s={class:"header-search"},d={class:"content"},u={class:"product-info"},l={class:"name"},f={class:"subtitle"},b={class:"price"},g={key:1,class:"empty",src:"https://s.yezgea02.com/1604041313083/kesrtd.png",alt:"搜索"};Object(c["z"])();var p=r((function(e,t,n,p,h,O){var j=Object(c["G"])("van-icon"),y=Object(c["G"])("van-tab"),v=Object(c["G"])("van-tabs"),m=Object(c["G"])("van-list"),k=Object(c["G"])("van-pull-refresh");return Object(c["y"])(),Object(c["f"])("div",a,[Object(c["i"])("div",o,[Object(c["i"])("header",i,[Object(c["i"])(j,{name:"arrow-left",onClick:p.goBack},null,8,["onClick"]),Object(c["i"])("div",s,[Object(c["i"])(j,{name:"search"}),Object(c["Q"])(Object(c["i"])("input",{type:"text",class:"search-title","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.keyword=t})},null,512),[[c["M"],e.keyword]])]),Object(c["i"])("span",{class:"search-btn",onClick:t[2]||(t[2]=function(){return p.getSearch&&p.getSearch.apply(p,arguments)})},"搜索")]),Object(c["i"])(v,{type:"card",color:"#1baeae",onClick:p.changeTab},{default:r((function(){return[Object(c["i"])(y,{title:"推荐",name:""}),Object(c["i"])(y,{title:"新品",name:"new"}),Object(c["i"])(y,{title:"价格",name:"price"})]})),_:1},8,["onClick"])]),Object(c["i"])("div",d,[Object(c["i"])(k,{modelValue:e.refreshing,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.refreshing=t}),onRefresh:p.onRefresh,class:"product-list-refresh"},{default:r((function(){return[Object(c["i"])(m,{loading:e.loading,"onUpdate:loading":t[3]||(t[3]=function(t){return e.loading=t}),finished:e.finished,"finished-text":e.productList.length?"没有更多了":"搜索想要的商品",onLoad:p.onLoad,onOffset:function(e){return 10}},{default:r((function(){return[e.productList.length?(Object(c["y"])(!0),Object(c["f"])(c["a"],{key:0},Object(c["E"])(e.productList,(function(t,n){return Object(c["y"])(),Object(c["f"])("div",{class:"product-item",key:n,onClick:function(e){return p.productDetail(t)}},[Object(c["i"])("img",{src:e.$filters.prefix(t.goodsCoverImg)},null,8,["src"]),Object(c["i"])("div",u,[Object(c["i"])("p",l,Object(c["J"])(t.goodsName),1),Object(c["i"])("p",f,Object(c["J"])(t.goodsIntro),1),Object(c["i"])("span",b,"￥ "+Object(c["J"])(t.sellingPrice),1)])],8,["onClick"])})),128)):(Object(c["y"])(),Object(c["f"])("img",g))]})),_:1},8,["loading","finished","finished-text","onLoad"])]})),_:1},8,["modelValue","onRefresh"])])])})),h=n("5530"),O=n("1da1"),j=(n("96cf"),n("99af"),n("6c02")),y=n("360d"),v={setup:function(){var e=Object(j["c"])(),t=Object(j["d"])(),n=Object(c["C"])({keyword:e.query.keyword||"",searchBtn:!1,seclectActive:!1,refreshing:!1,list:[],loading:!1,finished:!1,productList:[],totalPage:0,page:1,orderBy:""}),r=function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(){var c,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(c=e.query.categoryId,c||n.keyword){t.next=5;break}return n.finished=!0,n.loading=!1,t.abrupt("return");case 5:return t.next=7,Object(y["c"])({pageNumber:n.page,goodsCategoryId:c,keyword:n.keyword,orderBy:n.orderBy});case 7:r=t.sent,a=r.data,o=r.data.list,n.productList=n.productList.concat(o),n.totalPage=a.totalPage,n.loading=!1,n.page>=a.totalPage&&(n.finished=!0);case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=function(){t.go(-1)},o=function(e){t.push({path:"/product/".concat(e.goodsId)})},i=function(){d()},s=function(){!n.refreshing&&n.page<n.totalPage&&(n.page=n.page+1),n.refreshing&&(n.productList=[],n.refreshing=!1),r()},d=function(){n.refreshing=!0,n.finished=!1,n.loading=!0,n.page=1,s()},u=function(e){console.log("name",e),n.orderBy=e,d()};return Object(h["a"])(Object(h["a"])({},Object(c["K"])(n)),{},{goBack:a,productDetail:o,getSearch:i,changeTab:u,onLoad:s,onRefresh:d})}};n("f95c");v.render=p,v.__scopeId="data-v-ce8d8e4c";t["default"]=v},"8bdf":function(e,t,n){},"99af":function(e,t,n){"use strict";var c=n("23e7"),r=n("d039"),a=n("e8b5"),o=n("861d"),i=n("7b0b"),s=n("50c4"),d=n("8418"),u=n("65f0"),l=n("1dde"),f=n("b622"),b=n("2d00"),g=f("isConcatSpreadable"),p=9007199254740991,h="Maximum allowed index exceeded",O=b>=51||!r((function(){var e=[];return e[g]=!1,e.concat()[0]!==e})),j=l("concat"),y=function(e){if(!o(e))return!1;var t=e[g];return void 0!==t?!!t:a(e)},v=!O||!j;c({target:"Array",proto:!0,forced:v},{concat:function(e){var t,n,c,r,a,o=i(this),l=u(o,0),f=0;for(t=-1,c=arguments.length;t<c;t++)if(a=-1===t?o:arguments[t],y(a)){if(r=s(a.length),f+r>p)throw TypeError(h);for(n=0;n<r;n++,f++)n in a&&d(l,f,a[n])}else{if(f>=p)throw TypeError(h);d(l,f++,a)}return l.length=f,l}})},f95c:function(e,t,n){"use strict";n("8bdf")}}]);
//# sourceMappingURL=product-list.8d9e0079.js.map