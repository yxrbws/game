(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["product-list"],{1966:function(e,t,n){},"4ddc":function(e,t,n){"use strict";n.r(t);var c=n("7a23"),r=Object(c["R"])("data-v-04a9c2af");Object(c["B"])("data-v-04a9c2af");var a={class:"product-list-wrap"},i={class:"product-list-content"},o={class:"category-header wrap"},s={class:"header-search"},d=Object(c["i"])("i",{class:"nbicon nbSearch"},null,-1),u={class:"content"},l={class:"product-info"},f={class:"name"},b={class:"subtitle"},p={class:"price"},g={key:1,class:"empty",src:"https://s.yezgea02.com/1604041313083/kesrtd.png",alt:"搜索"};Object(c["z"])();var h=r((function(e,t,n,h,O,j){var y=Object(c["G"])("van-tab"),v=Object(c["G"])("van-tabs"),k=Object(c["G"])("van-list"),m=Object(c["G"])("van-pull-refresh");return Object(c["y"])(),Object(c["f"])("div",a,[Object(c["i"])("div",i,[Object(c["i"])("header",o,[Object(c["i"])("i",{class:"nbicon nbfanhui",onClick:t[1]||(t[1]=function(){return h.goBack&&h.goBack.apply(h,arguments)})}),Object(c["i"])("div",s,[d,Object(c["Q"])(Object(c["i"])("input",{type:"text",class:"search-title","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.keyword=t})},null,512),[[c["M"],e.keyword]])]),Object(c["i"])("span",{class:"search-btn",onClick:t[3]||(t[3]=function(){return h.getSearch&&h.getSearch.apply(h,arguments)})},"搜索")]),Object(c["i"])(v,{type:"card",color:"#1baeae",onClick:h.changeTab},{default:r((function(){return[Object(c["i"])(y,{title:"推荐",name:""}),Object(c["i"])(y,{title:"新品",name:"new"}),Object(c["i"])(y,{title:"价格",name:"price"})]})),_:1},8,["onClick"])]),Object(c["i"])("div",u,[Object(c["i"])(m,{modelValue:e.refreshing,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.refreshing=t}),onRefresh:h.onRefresh,class:"product-list-refresh"},{default:r((function(){return[Object(c["i"])(k,{loading:e.loading,"onUpdate:loading":t[4]||(t[4]=function(t){return e.loading=t}),finished:e.finished,"finished-text":e.productList.length?"没有更多了":"搜索想要的商品",onLoad:h.onLoad,onOffset:function(e){return 10}},{default:r((function(){return[e.productList.length?(Object(c["y"])(!0),Object(c["f"])(c["a"],{key:0},Object(c["E"])(e.productList,(function(t,n){return Object(c["y"])(),Object(c["f"])("div",{class:"product-item",key:n,onClick:function(e){return h.productDetail(t)}},[Object(c["i"])("img",{src:e.$filters.prefix(t.goodsCoverImg)},null,8,["src"]),Object(c["i"])("div",l,[Object(c["i"])("p",f,Object(c["J"])(t.goodsName),1),Object(c["i"])("p",b,Object(c["J"])(t.goodsIntro),1),Object(c["i"])("span",p,"￥ "+Object(c["J"])(t.sellingPrice),1)])],8,["onClick"])})),128)):(Object(c["y"])(),Object(c["f"])("img",g))]})),_:1},8,["loading","finished","finished-text","onLoad"])]})),_:1},8,["modelValue","onRefresh"])])])})),O=n("5530"),j=n("1da1"),y=(n("96cf"),n("99af"),n("6c02")),v=n("da71"),k={setup:function(){var e=Object(y["c"])(),t=Object(y["d"])(),n=Object(c["C"])({keyword:e.query.keyword||"",searchBtn:!1,seclectActive:!1,refreshing:!1,list:[],loading:!1,finished:!1,productList:[],totalPage:0,page:1,orderBy:""}),r=function(){var t=Object(j["a"])(regeneratorRuntime.mark((function t(){var c,r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(c=e.query.categoryId,c||n.keyword){t.next=5;break}return n.finished=!0,n.loading=!1,t.abrupt("return");case 5:return t.next=7,Object(v["k"])({pageNumber:n.page,goodsCategoryId:c,keyword:n.keyword,orderBy:n.orderBy});case 7:r=t.sent,a=r.data,i=r.data.list,n.productList=n.productList.concat(i),n.totalPage=a.totalPage,n.loading=!1,n.page>=a.totalPage&&(n.finished=!0);case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=function(){t.go(-1)},i=function(e){t.push({path:"/product/".concat(e.goodsId)})},o=function(){d()},s=function(){!n.refreshing&&n.page<n.totalPage&&(n.page=n.page+1),n.refreshing&&(n.productList=[],n.refreshing=!1),r()},d=function(){n.refreshing=!0,n.finished=!1,n.loading=!0,n.page=1,s()},u=function(e){console.log("name",e),n.orderBy=e,d()};return Object(O["a"])(Object(O["a"])({},Object(c["K"])(n)),{},{goBack:a,productDetail:i,getSearch:o,changeTab:u,onLoad:s,onRefresh:d})}};n("9479");k.render=h,k.__scopeId="data-v-04a9c2af";t["default"]=k},9479:function(e,t,n){"use strict";n("1966")},"99af":function(e,t,n){"use strict";var c=n("23e7"),r=n("d039"),a=n("e8b5"),i=n("861d"),o=n("7b0b"),s=n("50c4"),d=n("8418"),u=n("65f0"),l=n("1dde"),f=n("b622"),b=n("2d00"),p=f("isConcatSpreadable"),g=9007199254740991,h="Maximum allowed index exceeded",O=b>=51||!r((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),j=l("concat"),y=function(e){if(!i(e))return!1;var t=e[p];return void 0!==t?!!t:a(e)},v=!O||!j;c({target:"Array",proto:!0,forced:v},{concat:function(e){var t,n,c,r,a,i=o(this),l=u(i,0),f=0;for(t=-1,c=arguments.length;t<c;t++)if(a=-1===t?i:arguments[t],y(a)){if(r=s(a.length),f+r>g)throw TypeError(h);for(n=0;n<r;n++,f++)n in a&&d(l,f,a[n])}else{if(f>=g)throw TypeError(h);d(l,f++,a)}return l.length=f,l}})}}]);
//# sourceMappingURL=product-list.dc39ab29.js.map